---
title: 迭代
description: ""
---

# 迭代

<Player title="prompt_eng_03_iterative_v3" />

当我使用大型语言模型构建应用程序时，我认为我从来没有遇到过第一次尝试时在最终应用程序中使用的提示符。

这并不重要。

只要你有一个好的过程来迭代地改进你的提示，那么你就能找到一些对你想要完成的任务很有效的东西。

你可能听我说过，当我训练一个机器学习模型时，它几乎从来没有第一次成功过。

事实上，我很惊讶我训练的第一个模型是有效的。

我认为我们在提示，它第一次工作的几率可能会高一点，但正如他所说，第一次提示是否工作并不重要，最重要的是获得提示的过程对你的应用有效。

因此，让我们进入代码，让我向您展示一些框架来思考如何迭代开发提示符。

好吧。

如果你以前和我一起上过机器学习的课，你可能会看到我用一个图表来说明在机器学习的发展中，你经常有一个想法，然后实现它。

所以，编写代码，获取数据，训练你的模型，然后得到一个实验结果。

然后你可以看看输出，也许做错误分析，找出它在哪里工作或不工作，然后甚至可能改变你想要解决的问题的想法或者如何处理它。

然后改变实现，运行另一个实验等等，反复迭代，得到一个有效的机器学习模型。

如果你不熟悉机器学习，没有见过这个图，不用担心。

这对接下来的演讲来说并不重要。

但是，当您使用 LLM 编写开发应用程序的提示时，这个过程可能非常相似，您对想要做什么有一个想法，您想要完成的任务，然后您可以第一次尝试编写提示，希望提示是清晰和具体的，如果合适的话，可能会给系统时间来思考。

然后你可以运行它，看看得到什么结果。

如果它第一次不能很好地工作，那么迭代的过程就会弄清楚为什么指令不够清晰，或者为什么它没有给算法足够的时间来思考，这样你就可以完善这个想法，完善提示，等等，然后循环多次直到你得到一个适合你的应用程序的提示。

这也是为什么我个人没有那么关注网上那些所谓的 30 个完美提示的文章，因为我认为，在太阳底下可能没有一个完美的提示。

更重要的是，您有一个为您的特定应用程序开发好的提示符的过程。

那么，让我们一起看一个代码中的例子。

这里是你们在之前的视频中看到的起始代码，导入 OpenAI，导入 OS。

这里我们获得 OpenAI API 密钥，这与上次看到的 helper 函数相同。

在这个视频中，我将使用一个运行的例子，总结椅子的情况说明书。

我把它粘贴在这里。

如果你想的话，可以暂停视频仔细阅读左边笔记本上的内容。

但这里有一张椅子的说明书，上面有一个描述，说它是一个美丽的家庭的一部分，受世纪中叶的启发，等等。

它讨论了结构、尺寸、椅子的选择、材料等等。

它来自意大利。

所以，假设你想用这份情况说明书来帮助一个营销团队为一个在线零售网站写一篇描述。

让我快速运行这三个，然后我们会得到如下提示，我将。

.

.

我把这个粘贴进去。

我这里的提示是，你的任务是帮助一个营销团队为一个零售网站创建一个基于技术说明书的产品描述，写一个产品描述，等等。

对吧?这是我第一次尝试向大型语言模型解释这个任务。

让我按下 shift-enter 键，这需要几秒钟的运行时间，我们得到这个结果。

看起来它写了一个很好的描述，介绍了一个令人惊叹的中世纪风格的办公椅，完美的添加，等等。

但是当我看到这个的时候，我想，天哪，这真的很长。

它完全按照我的要求做得很好，从技术说明书开始，写一份产品描述。

但是当我看到这个的时候，我想，这有点长。

也许我们想让它短一点。

于是，我有了一个想法，我写了一个提示，得到了一个结果。

我不太满意，因为它太长了。

所以，我会澄清我的提示，并说，最多使用 50 个单词，试图更好地指导这篇文章的预期长度。

我们再来一次。

好吧。

这实际上看起来是对产品的一个更好的简短描述，介绍了一种受中世纪启发的办公椅，等等。

你们五个，既时尚又实用。

不坏。

我再检查一下它的长度。

那么，我将取响应，根据空格的位置将其拆分，然后，你知道，打印出长度。

总共 52 个单词。

其实还不错。

大型语言模型是可以的，但在执行关于非常精确的单词计数的指示时就不那么好了。

但这其实并不坏。

有时它会打印出 60 或 65 字的东西，但这是合理的。

你可以尝试做的一些事情是，说，最多用三句话。

我再运行一遍。

但是这些是告诉大型语言模型的不同方式，你想要的输出长度是多少。

所以这是 1,2,3，我数了三个句子，看起来我做得很好。

然后我也看到人们有时会这样，我不知道，最多使用 280 个字符。

大型语言模型，因为它们解释文本的方式，使用一种叫做标记器的东西，我不会谈论它。

但他们在数字方面表现一般。

但是让我们看看，281 个字符。

实际上非常接近。

通常一个大的语言模型，不会这么接近。

但是你可以用不同的方法来控制你得到的输出的长度。

但是让我把它改回最多 50 个单词。

这就是我们刚刚得到的结果。

当我们继续为我们的网站完善这篇文章时，我们可能会决定，孩子，这个网站不是直接向消费者销售，实际上是打算向家具零售商销售家具，而家具零售商对椅子的技术细节和椅子的材料更感兴趣。

在这种情况下，您可以接受这个提示并说，我想修改这个提示，使其更精确地描述技术细节。

我继续修改这个提示符。

我要说的是，这个描述是为家具零售商准备的，所以应该是技术性的，关注材料，产品和结构，好吧，让我们运行一下。

我们来看看。

不错，说，你知道，镀铝底座和气动椅，高质量的材料。

所以通过改变提示，你可以让它更专注于特定的角色，你想要的特定特征。

当我看到这个时，我可能会决定在描述的最后，我还想包括产品 ID。

所以这把椅子的两个产品，swc110 和 swc100。

所以，也许我可以进一步改进这个提示。

为了让它给我产品 ID，我可以在描述的末尾添加这条指令，包括技术规范中每个 7 个字符的产品 ID，让我们运行它，看看会发生什么。

所以，它说，向你介绍我们的代理小姐 5 办公椅，外壳颜色，谈塑料涂层，铝底座，实用性，一些选项，谈两个产品 id。

这看起来很不错。

您刚才看到的是许多开发人员都会经历的迭代提示开发的一个简短示例。

我认为，一个指导原则是，在上个视频中，你们看到我分享了一些最佳实践，所以，我通常做的是记住这样的最佳实践，清晰而具体，如果有必要，给模型时间去思考。

考虑到这些因素，通常值得首先尝试编写提示，看看会发生什么，然后从那里迭代地改进提示，以越来越接近您需要的结果。

所以，你在各种程序中看到的很多成功的提示都是通过这样的迭代过程得到的。

为了好玩，让我向您展示一个更复杂提示的示例，它可能会让您了解 chatGPT 可以做什么，也就是说，我在这里添加了一些额外的指令。

在描述之后，包含一个给出产品尺寸的表，然后，您知道，将所有内容格式化为 HTML。

让我们运行一下。

在实践中，只有在多次迭代之后，你才会得到这样的提示。

我想我不知道有人会在第一次尝试让系统处理情况说明书时写出这样的提示。

这实际上输出了一堆 HTML。

让我们显示 HTML，看看这是否是有效的 HTML，看看它是否有效。

我不知道它是否可行，但我们看看。

哦,很酷。

好吧。

看起来像是渲染过的。

它对椅子的结构，材料，产品尺寸都有很好的描述。

哦，看起来我漏掉了使用最多 50 个单词的说明，所以这有点长，但是如果你想要的话，你知道，你甚至可以随意暂停视频，让它更简洁，然后重新生成这个，看看你得到什么结果。

所以，我希望你们从这个视频中了解到，快速开发是一个迭代的过程。

尝试一些东西，看看它有什么不足，实现你想要的，然后想想如何澄清你的指示，或者在某些情况下，想想如何给它更多的思考空间，让它更接近你想要的结果。

我认为，成为一名有效的提示工程师的关键不在于知道完美的提示，而在于有一个好的过程来开发对你的应用程序有效的提示。

在这个视频中，我只用一个例子来说明如何开发提示符。

对于更复杂的应用程序，有时您将有多个示例，例如一个由 10 个甚至 50 或 100 个事实表组成的列表，并迭代地开发提示并根据大量案例对其进行评估。

但是对于大多数应用程序的早期开发，我看到许多人都以我的方式开发它，只有一个示例，但是对于更成熟的应用程序，有时根据更大的示例集评估提示可能会很有用，例如在数十个事实表上测试不同的提示，以查看多个事实表上的平均或最差情况性能。

但通常情况下，只有当应用程序更加成熟时，您才会这样做，并且您必须有这些指标来驱动增量的最后几个步骤的快速改进。

因此，请使用 Jupyter Code 笔记本上的例子，尝试不同的变化，看看你会得到什么结果。

完成后，我们继续下一个视频，我们将讨论软件应用中大型语言模型的一个非常常见的用法，那就是总结文本。

当你准备好了，我们继续下一个视频。
