---
title: 聊天机器人
description: ""
---

# 聊天机器人

<Player title="prompt_eng_08_chatbot_v3" />

关于大型语言模型的一个令人兴奋的事情是，您可以使用它来构建自定义聊天机器人，而只需要少量的努力。

ChatGPT，网络界面，是一种让你拥有对话界面的方式，通过一个大型语言模型进行对话。

但很酷的一件事是，你也可以使用一个大的语言模型来构建你的自定义聊天机器人，也许扮演一个人工智能客户服务代理的角色，或者一个人工智能餐厅的点菜员。

在这个视频中，你将学习如何自己做到这一点。

我将更详细地描述 OpenAI 聊天完成格式的组件，然后您将自己构建一个聊天机器人。

让我们开始吧。

首先，我们将像往常一样设置 OpenAI Python 包。

因此，像 ChatGPT 这样的聊天模型实际上被训练为接受一系列消息作为输入，并返回模型生成的消息作为输出。

因此，尽管聊天格式是为了使多回合的对话变得简单而设计的，但我们在之前的视频中已经看到，对于没有任何对话的单回合任务，它也同样有用。

接下来我们要定义两个辅助函数。

这是我们在所有视频中都用到的函数它是"get_completion"函数。

但是如果你看一下它，我们给出了一个提示，但是在函数内部我们实际做的是把这个提示放入一个看起来像用户消息的东西中。

这是因为 ChatGPT 模型是一个聊天模型，这意味着它被训练成接受一系列消息作为输入，然后返回模型生成的消息作为输出。

用户消息是输入，然后助手消息是输出。

所以在这个视频中，我们将使用一个不同的辅助函数，而不是把一个提示作为输入并获得一个完成，我们将传递一个消息列表这些消息可能来自不同的角色。

我来描述一下。

这是一个消息列表的例子第一个消息是一个系统消息它给出了一个总体的指令，然后在这个消息之后我们在用户和助手之间进行切换这个会继续下去。

如果你曾经使用过 ChatGPT，网络界面，那么你的消息是用户消息，然后 ChatGPT 的消息是助理消息。

所以系统信息有助于设置助理的行为和角色它是对话的高级指令。

所以你可以把它想象成在助手耳边低语，引导它的反应，而用户却没有意识到系统的信息。

因此，作为用户，如果您曾经使用过 ChatGPT，您可能不知道 ChatGPT 的系统消息中有什么。

系统消息的好处是，它为您(开发人员)提供了一种构建会话的方法，而无需使请求本身成为会话的一部分。

所以你可以引导助手在它耳边低语引导它的反应而不让用户意识到。

现在让我们试着在对话中使用这些信息。

因此，我们将使用新的辅助函数从消息中获得补全。

我们也用了更高的温度。

所以系统信息说，`你是一个说话像莎士比亚的助手`。

这是我们向助手描述它应该如何表现。

然后第一条用户信息是，`给我讲个笑话`。

下一个问题是，`为什么鸡要过马路?`最后的用户信息是，“我不知道。

所以如果我们运行这个，响应是`To get To the other side`。

我们再试一次。

`为了到达另一边，公平的先生或女士。`

这是一部经久不衰的经典之作。

这就是我们的莎士比亚式反应。

我们再来试一件事。

因为我想更清楚地说明这是助理留言。

这里，让我们打印整个消息响应。

为了更清楚一点。

此回复是一条辅助消息。

角色是助手，内容是信息本身。

这就是辅助函数的作用。

我们只是在传递信息的内容。

现在我们再做一个例子。

这里是我们的消息，系统消息是`你是一个友好的聊天机器人`，第一条用户消息是`嗨，我的名字是Isa`。

我们想要得到第一条用户消息。

让我们对第一条助理消息执行这个。

所以第一条信息是，“你好，Isa!很高兴认识你。

今天我能为您效劳吗?”现在我们来试试另一个例子。

这里我们的信息是系统信息，`你是一个友好的聊天机器人`，第一条用户信息是，`是的，你能提醒我我的名字是什么吗?`让我们得到响应。

正如你所看到的，这个模型并不知道我的名字。

因此，与语言模型的每个对话都是独立的交互，这意味着您必须为模型提供所有相关的消息，以便从当前对话中提取信息。

如果您希望模型从对话的较早部分中提取信息，或者引用引号，请记住对话的较早部分，那么您必须在模型的输入中提供较早的交换。

所以我们把它称为上下文。

我们来试一下。

现在我们已经给出了模型需要的上下文，也就是我的名字，在之前的消息中，我们会问同样的问题，我们会问我的名字是什么。

模型能够做出响应是因为它有我们输入给它的消息列表中需要的所有上下文。

现在你要构建自己的聊天机器人。

这个聊天机器人将被称为`OrderBot`，为了构建这个`OrderBot`，我们将自动收集用户提示和辅助响应。

和需要订单比萨餐厅,首先我们要定义这个 helper 函数,这是做的什么类型的收集用户的信息我们可以避免手工输入他们的一样,在我们之上,这是收集用户界面的提示,我们将构建下面,然后将它添加到一个列表称为`上下文`,然后它将调用上下文每次的模型。

然后模型响应也被添加到 context 中，模型消息被添加到 context 中，用户消息被添加到 context 中，等等，它会变得越来越长。

这样，模型就拥有了决定下一步做什么所需的信息。

现在我们将设置并运行这种 UI 来显示汽车人。

这是上下文，它包含了包含菜单的系统消息。

注意，每次我们调用语言模型时，我们都会使用相同的上下文，而上下文是随着时间建立起来的。

然后我们来执行这个。

好吧，我要说，`嗨，我想点一份披萨`。

店员说:`太好了，你想点什么披萨?`我们有意大利辣香肠、奶酪和茄子披萨。

“嗯。

`多少钱?`，很好，我们有价格了。

我想我想吃中号茄子披萨。

所以你可以想象，我们可以继续这个对话。

让我们看看我们在系统消息中放了什么。

“你是汽车人，一个为披萨店收集订单的自动服务。

你首先问候顾客，然后领取订单，然后询问是提货还是送货。

您等待收集整个订单，然后对其进行汇总，并最后一次检查客户是否希望添加其他内容。

如果是快递，你可以询问地址。

最后，您收取付款。

确保明确所有的选项，额外的和尺寸，以唯一地识别菜单上的项目。

你的回答简短、健谈、友好。

菜单上有……

然后，这是菜单。

那么，让我们回到我们的对话，让我们看看助理是否一直在遵循指示。

很好，助理问我们是否需要配料，这是我们在系统消息中指定的。

所以，我想我们不需要额外的配料。

确定的事情。

`您还要点别的什么吗?`我们去喝点水吧。

实际上,薯条。

小的还是大的?这很好，因为我们在系统信息中要求助理澄清额外的和侧面。

所以，你明白了吧，请自己随意摆弄一下。

你可以暂停视频，然后在你左边的笔记本上运行这个。

因此，现在我们可以要求模型创建一个 JSON 摘要，我们可以根据对话将其发送到订单系统。

所以，我们现在附加另一个系统消息，这是一个指令，我们说，“创建一个 JSON 摘要的前一个食品订单。

列出每件商品的价格。

字段应该是 1.披萨，包括配菜，2.配料清单，3.饮料清单，4.配菜清单，最后是总价。

你也可以在这里使用用户信息。

这并不一定是一个系统消息。

我们来执行这个。

注意，在这种情况下，我们使用较低的温度因为对于这类任务，我们希望输出是相当可预测的。

对于会话代理，您可能希望使用更高的温度。

然而，在这种情况下，我可能也会使用较低的温度，因为对于客户的助理聊天机器人，您可能也希望输出更具可预测性。

这是我们的顺序的总结。

所以，如果我们愿意的话，我们可以把它提交给订货系统。

好了，你已经建立了自己的订单聊天机器人。

你可以随意定制它，摆弄系统信息来改变聊天机器人的行为，让它扮演不同的角色，拥有不同的知识。
